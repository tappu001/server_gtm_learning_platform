<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server-Side Tagging Learning Hub</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="header__title">Server-Side Tagging Learning Hub</h1>
            <p class="header__subtitle">Master server-side tagging from basics to advanced implementation</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="overallProgress"></div>
                </div>
                <span class="progress-text" id="progressText">0% Complete</span>
            </div>
        </div>
    </header>

    <nav class="navigation">
        <div class="container">
            <ul class="nav-list">
                <li><button class="nav-item active" data-module="welcome">Welcome</button></li>
                <li><button class="nav-item" data-module="fundamentals">Fundamentals</button></li>
                <li><button class="nav-item" data-module="examples">Examples</button></li>
                <li><button class="nav-item" data-module="backend">Backend</button></li>
                <li><button class="nav-item" data-module="implementation">Implementation</button></li>
                <li><button class="nav-item" data-module="instances">Instances</button></li>
                <li><button class="nav-item" data-module="troubleshooting">Troubleshooting</button></li>
                <li><button class="nav-item" data-module="pricing">Pricing</button></li>
                <li><button class="nav-item" data-module="quiz">Quiz</button></li>
            </ul>
        </div>
    </nav>

    <main class="main">
        <div class="container">
            <!-- Welcome Module -->
            <section class="module active" id="welcome">
                <div class="module-header">
                    <h2>Welcome to Server-Side Tagging</h2>
                    <p class="module-description">Transform your tracking setup with enterprise-grade server-side tagging</p>
                </div>
                
                <div class="welcome-grid">
                    <div class="welcome-card">
                        <h3>üöÄ Why Server-Side?</h3>
                        <ul>
                            <li>90%+ data accuracy vs 60-70% client-side</li>
                            <li>First-party cookies last 400 days vs 7 days</li>
                            <li>Faster website performance</li>
                            <li>Enhanced privacy controls</li>
                        </ul>
                    </div>
                    
                    <div class="welcome-card">
                        <h3>üìö What You'll Learn</h3>
                        <ul>
                            <li>Core concepts and architecture</li>
                            <li>Real-world implementation examples</li>
                            <li>Step-by-step Google Cloud setup</li>
                            <li>Cost optimization strategies</li>
                        </ul>
                    </div>
                    
                    <div class="welcome-card">
                        <h3>‚è±Ô∏è Time Investment</h3>
                        <ul>
                            <li>Learning: 2-3 hours</li>
                            <li>Setup: 4-6 hours</li>
                            <li>Testing: 1-2 hours</li>
                            <li>Ongoing: 30 min/month</li>
                        </ul>
                    </div>
                </div>
                
                <div class="cta-section">
                    <button class="btn btn--primary btn--lg" onclick="startLearning()">Start Learning Journey</button>
                </div>
            </section>

            <!-- Fundamentals Module -->
            <section class="module" id="fundamentals">
                <div class="module-header">
                    <h2>Understanding the Basics</h2>
                    <p class="module-description">Learn the core differences between client-side and server-side tagging</p>
                </div>
                
                <div class="comparison-container">
                    <div class="comparison-side">
                        <h3 class="comparison-title client-side">Client-Side Tagging</h3>
                        <div class="comparison-content">
                            <p>Traditional approach where tracking scripts execute directly in the user's browser. Multiple JavaScript libraries load simultaneously, creating separate connections to different third-party servers.</p>
                            
                            <h4>Key Characteristics:</h4>
                            <ul class="key-points">
                                <li>Scripts run in user's browser</li>
                                <li>Multiple direct connections to vendors</li>
                                <li>Third-party cookies limited to 7 days</li>
                                <li>Vulnerable to ad blockers</li>
                                <li>Can slow down website performance</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="vs-divider">
                        <span class="vs-text">VS</span>
                    </div>
                    
                    <div class="comparison-side">
                        <h3 class="comparison-title server-side">Server-Side Tagging</h3>
                        <div class="comparison-content">
                            <p>Introduces a central server acting as intermediary. Browser sends data to one endpoint you control, which processes and forwards information to appropriate platforms.</p>
                            
                            <h4>Key Characteristics:</h4>
                            <ul class="key-points">
                                <li>Single connection from browser to your server</li>
                                <li>Server-to-server communication cannot be blocked</li>
                                <li>First-party cookies can last up to 400 days</li>
                                <li>Complete control over data processing</li>
                                <li>Better website performance</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('fundamentals')">Mark Complete</button>
                </div>
            </section>

            <!-- Examples Module -->
            <section class="module" id="examples">
                <div class="module-header">
                    <h2>Real-World Examples</h2>
                    <p class="module-description">See how both approaches work in actual business scenarios</p>
                </div>
                
                <div class="example-scenario">
                    <h3>E-commerce Purchase Tracking</h3>
                    <p class="scenario-description">Customer buys running shoes for $120</p>
                    
                    <div class="scenario-tabs">
                        <button class="tab-btn active" data-tab="client">Client-Side Process</button>
                        <button class="tab-btn" data-tab="server">Server-Side Process</button>
                    </div>
                    
                    <div class="tab-content active" id="client-tab">
                        <div class="process-flow">
                            <h4>How it works:</h4>
                            <ol class="process-steps">
                                <li>Browser loads product page with multiple tracking scripts</li>
                                <li>GA4 script fires directly to Google</li>
                                <li>Facebook Pixel sends data to Facebook</li>
                                <li>Google Ads script reports to Google Ads</li>
                                <li>Each platform creates its own cookies</li>
                                <li>Ad blockers may prevent some tracking</li>
                            </ol>
                            
                            <div class="issues-box">
                                <h4>Common Issues:</h4>
                                <ul>
                                    <li>30-40% data loss from blocking</li>
                                    <li>Inconsistent data across platforms</li>
                                    <li>Multiple network requests slow page</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="server-tab">
                        <div class="process-flow">
                            <h4>How it works:</h4>
                            <ol class="process-steps">
                                <li>Browser sends purchase data to your server</li>
                                <li>Server validates and enriches the data</li>
                                <li>Server simultaneously sends data to all platforms</li>
                                <li>First-party cookies set from your domain</li>
                                <li>Complete data accuracy maintained</li>
                            </ol>
                            
                            <div class="benefits-box">
                                <h4>Key Benefits:</h4>
                                <ul>
                                    <li>90%+ data accuracy</li>
                                    <li>Consistent data across all platforms</li>
                                    <li>Faster page load times</li>
                                    <li>Enhanced privacy controls</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('examples')">Mark Complete</button>
                </div>
            </section>

            <!-- Backend Module -->
            <section class="module" id="backend">
                <div class="module-header">
                    <h2>Backend Processing</h2>
                    <p class="module-description">Understand how server-side tagging works behind the scenes</p>
                </div>
                
                <div class="concept-grid">
                    <div class="concept-card">
                        <h3>Data Flow Architecture</h3>
                        <p>When a user interacts with your website, their browser sends event data to your Cloud Run server. This server runs containerized applications that process the data according to your business rules, then distribute it to marketing platforms.</p>
                    </div>
                    
                    <div class="concept-card">
                        <h3>Container Technology</h3>
                        <p>Cloud Run uses containers - lightweight, portable units containing all software dependencies. These containers automatically scale up during high traffic and scale down during quiet periods to optimize costs.</p>
                    </div>
                    
                    <div class="concept-card">
                        <h3>Data Processing Capabilities</h3>
                        <p>The server can validate data quality, filter bot traffic, hash personal information for privacy, enrich data with customer database information, and implement real-time business logic before sending to platforms.</p>
                    </div>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('backend')">Mark Complete</button>
                </div>
            </section>

            <!-- Implementation Module -->
            <section class="module" id="implementation">
                <div class="module-header">
                    <h2>Step-by-Step Implementation</h2>
                    <p class="module-description">Complete guide from account creation to production deployment</p>
                </div>
                
                <div class="implementation-steps">
                    <div class="step-card">
                        <div class="step-header">
                            <h3>Phase 1: Account Setup</h3>
                            <span class="step-time">30 minutes ‚Ä¢ Free with credits</span>
                        </div>
                        <div class="step-content">
                            <ul class="task-list">
                                <li>Create Google Cloud Platform account ($300 free credits for new users)</li>
                                <li>Set up billing account (required even for free usage)</li>
                                <li>Create or access existing Google Tag Manager account</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-header">
                            <h3>Phase 2: Container Creation</h3>
                            <span class="step-time">20 minutes ‚Ä¢ ~$45/month per server after free tier</span>
                        </div>
                        <div class="step-content">
                            <ul class="task-list">
                                <li>Open GTM and click Admin ‚Üí Create Container</li>
                                <li>Choose 'Server' as target platform</li>
                                <li>Select 'Automatically provision tagging server'</li>
                                <li>Wait 10-15 minutes for automated setup</li>
                                <li>Verify container status shows 'Running'</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-header">
                            <h3>Phase 3: Custom Domain Setup</h3>
                            <span class="step-time">1-2 hours ‚Ä¢ No additional cost</span>
                        </div>
                        <div class="step-content">
                            <ul class="task-list">
                                <li>Choose subdomain (e.g. gtm.yourstore.com)</li>
                                <li>Access domain registrar DNS settings</li>
                                <li>Create CNAME record pointing to Google infrastructure</li>
                                <li>Wait for SSL certificate auto-provisioning</li>
                                <li>Test domain with /healthy endpoint</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-header">
                            <h3>Phase 4: Configuration</h3>
                            <span class="step-time">2-4 hours ‚Ä¢ No additional cost</span>
                        </div>
                        <div class="step-content">
                            <ul class="task-list">
                                <li>Create clients in server container (GA4, Facebook, etc.)</li>
                                <li>Configure server-side tags for each platform</li>
                                <li>Set up data transformation and filtering rules</li>
                                <li>Update web container to use server URL</li>
                                <li>Test in preview mode thoroughly</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('implementation')">Mark Complete</button>
                </div>
            </section>

            <!-- Instances Module -->
            <section class="module" id="instances">
                <div class="module-header">
                    <h2>Instance Management</h2>
                    <p class="module-description">Master Cloud Run instances for optimal performance and cost</p>
                </div>
                
                <div class="instance-explanation">
                    <div class="instance-card">
                        <h3>What are Instances?</h3>
                        <p>Think of Cloud Run instances as virtual computers that Google provides in their data centers. Each instance can handle multiple simultaneous requests from your website visitors. They're not physical machines but isolated computing environments.</p>
                        
                        <div class="specs-grid">
                            <div class="spec-item">
                                <strong>Default:</strong> 1 vCPU, 512MB memory
                            </div>
                            <div class="spec-item">
                                <strong>Max Concurrency:</strong> 80 requests per instance
                            </div>
                            <div class="spec-item">
                                <strong>Auto Scaling:</strong> 0 to 1000 instances
                            </div>
                            <div class="spec-item">
                                <strong>Cold Start:</strong> &lt; 1 second
                            </div>
                        </div>
                    </div>
                    
                    <div class="scaling-card">
                        <h3>Scaling Configuration</h3>
                        <p>Instances automatically scale based on traffic. Set minimum instances to avoid cold starts, maximum instances to control costs.</p>
                        
                        <div class="recommendations">
                            <h4>Recommendations:</h4>
                            <ul>
                                <li><strong>Small sites:</strong> 1 min, 10 max instances</li>
                                <li><strong>Medium sites:</strong> 2 min, 50 max instances</li>
                                <li><strong>Large sites:</strong> 5 min, 100 max instances</li>
                                <li><strong>Enterprise:</strong> Custom based on traffic patterns</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('instances')">Mark Complete</button>
                </div>
            </section>

            <!-- Troubleshooting Module -->
            <section class="module" id="troubleshooting">
                <div class="module-header">
                    <h2>Common Issues & Solutions</h2>
                    <p class="module-description">Fix problems quickly with these proven solutions</p>
                </div>
                
                <div class="troubleshooting-list">
                    <div class="issue-card">
                        <div class="issue-header" onclick="toggleIssue(this)">
                            <h3>Container not receiving requests</h3>
                            <span class="toggle-icon">+</span>
                        </div>
                        <div class="issue-content">
                            <div class="symptoms">
                                <h4>Symptoms:</h4>
                                <ul>
                                    <li>Empty preview mode</li>
                                    <li>No events showing</li>
                                    <li>400 errors</li>
                                </ul>
                            </div>
                            <div class="solutions">
                                <h4>Solutions:</h4>
                                <ul>
                                    <li>Check server URL in web container configuration</li>
                                    <li>Verify custom domain DNS settings</li>
                                    <li>Test /healthy endpoint returns 'ok'</li>
                                    <li>Ensure Chrome browser for preview mode</li>
                                    <li>Check for CSP or CORS blocking</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="issue-card">
                        <div class="issue-header" onclick="toggleIssue(this)">
                            <h3>No Client Claimed the Request</h3>
                            <span class="toggle-icon">+</span>
                        </div>
                        <div class="issue-content">
                            <div class="symptoms">
                                <h4>Symptoms:</h4>
                                <ul>
                                    <li>Requests show 'none' for client</li>
                                    <li>Events not processing</li>
                                </ul>
                            </div>
                            <div class="solutions">
                                <h4>Solutions:</h4>
                                <ul>
                                    <li>Create appropriate client in server container (GA4, Facebook, etc.)</li>
                                    <li>Check client filtering logic</li>
                                    <li>Verify request format matches client expectations</li>
                                    <li>Review authentication settings</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('troubleshooting')">Mark Complete</button>
                </div>
            </section>

            <!-- Pricing Module -->
            <section class="module" id="pricing">
                <div class="module-header">
                    <h2>2024-2025 Pricing & Optimization</h2>
                    <p class="module-description">Current costs and strategies to minimize expenses</p>
                </div>
                
                <div class="pricing-grid">
                    <div class="pricing-card">
                        <h3>Base Costs</h3>
                        <div class="price-item">
                            <strong>$45/month</strong> per server (1 vCPU, 512MB)
                        </div>
                        <div class="price-item">
                            <strong>$45</strong> per additional instance
                        </div>
                        <div class="price-item">
                            <strong>$0.12/GB</strong> outbound data transfer (1GB free)
                        </div>
                    </div>
                    
                    <div class="pricing-card">
                        <h3>Free Tier</h3>
                        <ul>
                            <li>2 million requests/month</li>
                            <li>400,000 GB-seconds/month</li>
                            <li>200,000 vCPU-seconds/month</li>
                        </ul>
                    </div>
                    
                    <div class="pricing-card">
                        <h3>Typical Costs</h3>
                        <div class="cost-breakdown">
                            <div class="cost-item">
                                <strong>Small Site:</strong> $45-90/month (1-2 instances)
                            </div>
                            <div class="cost-item">
                                <strong>Medium Site:</strong> $135-270/month (3-6 instances)
                            </div>
                            <div class="cost-item">
                                <strong>Large Site:</strong> $450+/month (10+ instances)
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="optimization-tips">
                    <h3>Optimization Strategies</h3>
                    <ul class="optimization-list">
                        <li>Use 'always on' pricing for predictable traffic (cheaper than on-demand)</li>
                        <li>Choose Tier 1 regions for lower costs</li>
                        <li>Optimize container size to reduce resource usage</li>
                        <li>Implement efficient tag configurations</li>
                        <li>Monitor and adjust scaling settings regularly</li>
                    </ul>
                </div>
                
                <div class="module-actions">
                    <button class="btn btn--primary" onclick="completeModule('pricing')">Mark Complete</button>
                </div>
            </section>

            <!-- Quiz Module -->
            <section class="module" id="quiz">
                <div class="module-header">
                    <h2>Knowledge Assessment</h2>
                    <p class="module-description">Test your understanding with interactive questions</p>
                </div>
                
                <div class="quiz-container">
                    <div class="quiz-question active" data-question="0">
                        <h3>Question 1 of 2</h3>
                        <p class="question-text">What is the main advantage of server-side tagging for cookie lifetime?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="0">
                                <span>Cookies last 7 days instead of 1 day</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="1">
                                <span>Cookies last 400 days instead of 7 days</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="2">
                                <span>Cookies never expire</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q1" value="3">
                                <span>Cookies are not needed</span>
                            </label>
                        </div>
                        <button class="btn btn--primary quiz-next" onclick="nextQuestion(0)">Next Question</button>
                    </div>
                    
                    <div class="quiz-question" data-question="1">
                        <h3>Question 2 of 2</h3>
                        <p class="question-text">What happens when you set minimum instances to 2 in Cloud Run?</p>
                        <div class="quiz-options">
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="0">
                                <span>Maximum 2 users can access your site</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="1">
                                <span>At least 2 virtual computers always running</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="2">
                                <span>Exactly 2 requests processed per second</span>
                            </label>
                            <label class="quiz-option">
                                <input type="radio" name="q2" value="3">
                                <span>2 different tracking platforms supported</span>
                            </label>
                        </div>
                        <button class="btn btn--primary quiz-submit" onclick="submitQuiz()">Submit Quiz</button>
                    </div>
                    
                    <div class="quiz-results" id="quizResults" style="display: none;">
                        <h3>Quiz Results</h3>
                        <div class="results-content">
                            <div class="score-display">
                                <span class="score-text">Your Score: <span id="scoreValue">0</span>/2</span>
                            </div>
                            <div class="explanations" id="explanations"></div>
                            <button class="btn btn--primary" onclick="completeModule('quiz')">Complete Learning Journey</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Resources Section -->
            <section class="resources-section">
                <h2>Additional Resources</h2>
                <div class="resources-grid">
                    <div class="resource-card">
                        <h3>Useful Links</h3>
                        <ul class="resource-list">
                            <li><a href="https://cloud.google.com/products/calculator" target="_blank">Google Cloud Run Pricing Calculator</a></li>
                            <li><a href="https://developers.google.com/tag-platform/tag-manager/server-side" target="_blank">GTM Server-Side Documentation</a></li>
                            <li><a href="https://stape.io/blog/how-to-set-up-google-tag-manager-server-side-container" target="_blank">Stape.io Setup Guide</a></li>
                        </ul>
                    </div>
                    
                    <div class="resource-card">
                        <h3>Essential Tools</h3>
                        <ul class="resource-list">
                            <li>Google Tag Manager</li>
                            <li>Google Cloud Console</li>
                            <li>DNS Management Tools</li>
                            <li>Browser Developer Tools</li>
                            <li>GTM Preview Mode</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script src="app.js"></script>
</body>
</html>